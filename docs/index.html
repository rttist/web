<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>RTTIST | Runtime Type Information System for TypeScript</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="Runtime Type Information System for TypeScript">
		<meta name="keywords" content="rttist,runtime,reflection,type,information,system,TypeScript,reflect,JavaScript">
		<meta name="robots" content="index,follow">
		<!--		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css">-->
		<link rel="stylesheet" href="assets/styles/style.css">
		<link rel="icon" type="image/png" href="assets/favicon.png">
		<script>
			function scrollToHref(anchor) {
				const selector = anchor.getAttribute("href");
				const element = document.querySelector(selector);

				if (element) {
					element.scrollIntoView({behavior: "smooth"});
					return false;
				}
			}

			const playground = (function () {
				let modal;

				return {
					open: function openPlayground() {
						if (!modal) {
							modal = document.getElementById("modal");
							modal.getElementsByClassName("content")[0].innerHTML
								= '<iframe src="https://stackblitz.com/edit/tst-reflect-overloads?ctl=1&embed=1&file=index.ts&theme=light&view=editor"></iframe>';
						}

						modal.classList.add("open");
						return false;
					},

					hide: function hidePlayground() {
						if (modal) {
							modal.classList.remove("open");
						}
						return false;
					}
				};
			})();
		</script>
	</head>
	<body>
		<div id="modal">
			<div class="background" onclick="playground.hide()"></div>
			<div class="close" onclick="playground.hide()"></div>
			<div class="content"></div>
		</div>

		<div class="header">
			<div class="glow-over"></div>
			<div class="glow-under"></div>
			<div class="editor">
				<div class="run-playground" onclick="playground.open()"><span>Run StackBlitz project.</span></div>
				<!--<a class="btn" href="#playground" onclick="return scrollToHref(this)">RUN PROJECT</a>-->
			</div>

			<div class="center">
				<div class="editor-fade-cover"></div>

				<nav>
					<ul>
						<li><a href="//docs.rttist.org">Docs</a></li>
						<li><a href="//github.com/rttist/examples">Examples</a></li>
						<li>
							<a href="//github.com/rttist/rttist">
								<img src="assets/images/github-logo.png" alt="GitHub">
							</a>
						</li>
					</ul>
				</nav>

				<div class="title">
					<header>
						<h1>
							<span class="logomark"></span>
							<span class="name"><span>RTTIST</span></span>
						</h1>
						<h2>Runtime Type Information<span><br></span>System for&nbsp;TypeScript</h2>
					</header>

					<div class="buttons">
						<a class="btn" href="//docs.rttist.org/#/en/getting-started">Get Started</a>
						<a class="btn" href="//docs.rttist.org/">Documentation</a>
						<a class="btn run-playground" href="#" onclick="return playground.open()">Playground</a>
					</div>
				</div>
			</div>
		</div>

		<main>
			<div class="section-wrap">
				<section class="highlights">
					<section>
						<div>
							<h1>Runtime Reflection</h1>
							<p>
								Reflection provides objects describing <a href="//docs.rttist.org/#/en/type">types</a> and <a href="//docs.rttist.org/#/en/module">modules</a>. 
								You can use reflection to look up, dynamically import and create an instance of a type, 
								list its properties, accessors, methods, constructors, decorators and other information.
								You can also get the type of an existing object and/or statically check or compare types. 
								If you are using decorators in your code, reflection enables you to access them and read their constant arguments.
							</p>
							
							<p>
								Type objects are inheritors of the <strong>Type</strong> class that is narrowable by the <a href="//docs.rttist.org/#/en/type/type-guards">set of type-guards</a>.
							</p>
						</div>
						<figure>
						<pre><code class="language-typescript"></code></pre>
						</figure>
					</section>
					<section>
						<div>
							<h1>The Power of Reflection</h1>
							<p>
								Static metadata library of all the types and modules from project accessible at runtime.
							</p>
						</div>
						<figure>
						<pre><code class="language-typescript"><!--class ControllerBase {
	get(id?: string) {
		// ...
	}
}

function route(route: string) {
	return function &lt;T extends typeof ControllerBase>(target: T) {};
}
-->@route("motor")
class MotorController extends ControllerBase {
	get(id?: string) {
		// ...
	}
}

// Get the Type of the @route decorator.
const routeDecoratorType = Reflect.getType&lt;typeof route>();

// Find all classes decorated by the @route decorator.
const controllers = Metadata.getTypes()
	.filter(type => type.isClass())
	.map(type => ({
		type,
		routeDecorator: type.getDecorators()
			.find(decorator => decorator.is(routeDecoratorType))
	}))
	.filter(x => x.routeDecorator !== undefined);

controllers.map(async x => {
	const ClassCtor: typeof ControllerBase = await x.type.getCtor();
	
	// The @route decorator argument... "motor" in case of MotorController
	const route = x.routeDecorator.getArguments()[0];
	
	app.get("/" + route + "/:id", (req, res) => {
		return new ClassCtor().get(req.params.id);
	})
});</code></pre>
						</figure>
					</section>

					<section>
						<div>
							<h1>Metadata Library of Project Types and Modules</h1>
							<p>
								Static metadata library of all the types and modules from project accessible at runtime.
							</p>
						</div>
						<figure>
						<pre><code class="language-typescript">const entityType = Reflect.getType&lt;Entity>();

const allEntities: Type[] = Metadata.getModules()
	.filter(module => module.path.includes(__dirname))
	.flatMap(module => module.getTypes())
	.filter(type => type.exported &amp;&amp; type.isClass() 
		&amp;&amp; !type.abstract && type.isDerivedFrom(entityType));</code></pre>
						</figure>
					</section>

					<section>
						<div>
							<h1>Vast Majority of Types Supported</h1>
							<p>
								Reflection over the types such as classes, interfaces, type aliases, functions, decorators including native types.
							</p>
						</div>
						<figure>
						<pre><code class="language-typescript">interface NativeTypes {
	prop1: any;
	prop2: unknown;
	prop3: undefined;
	prop4: null;
	prop5: void;
	prop6: string;
	prop7: number;
	prop8: BigInt;
	prop9: Boolean;
	prop10: Date;
	prop11: Array&lt;number>;
	prop12: Array&lt;Array&lt;number>>;
	prop13: number[];
	prop14: number[][];
	prop15: Map&lt;string, string>;
	prop16: WeakMap&lt;Function, string>;
	prop17: Set&lt;string>;
	prop18: WeakSet&lt;Function>;
	prop19: Int8Array;
	prop20: Uint8Array;
	prop21: Uint8ClampedArray;
	prop22: Int16Array;
	prop23: Uint16Array;
	prop24: Int32Array;
	prop25: Uint32Array;
	prop26: Float32Array;
	prop27: Float64Array;
	prop28: BigInt64Array;
	prop29: BigUint64Array;
	prop30: Symbol;
	prop31: Promise&lt;boolean>;
	prop32: Error;
	prop33: RegExp;
	prop34: ArrayBuffer;
	prop35: SharedArrayBuffer;
	prop36: Atomics;
	prop37: DataView;
	prop38: Generator;
	prop39: Iterable&lt;any>;
	prop40: IterableIterator&lt;any>;
	prop41: AsyncIterator&lt;any>;
	prop42: AsyncGeneratorFunction;
	prop46: AsyncGenerator&lt;any>;
}</code></pre>
						</figure>
					</section>

					<section>
						<div>
							<h1>Generic Type Parameters</h1>
							<p>
								You can get the real type of type parameter at runtime.
								Generic type parameter of type aliases, interfaces, functions, classes and methods are fully supported.
							</p>
						</div>
						<figure>
						<pre><code class="language-typescript">class CarFactory&lt;TMotor extends Motor> {
	constructor() {
		console.log(
			"Gonna create cars with", 
			Reflect.getType&lt;TMotor>().name
		);
	}

	changeMotor&lt;TNewMotor extends TMotor>():  {
		console.log(
			"Changing motor from",
			Reflect.getType&lt;TMotor>().name,
			"to",
			Reflect.getType&lt;TNewMotor>().name
		);
	}

	async create(): Car&lt;TMotor> {
		// ...
	}
}
						
class SkyActiveG2019 extends Motor {}
class SkyActiveG2022 extends SkyActiveG2019 {}

const mazda3Factory = new Car&lt;SkyActiveG2019>();
await mazda3Factory.create();
mazda3Factory.changeMotor&lt;SkyActiveG2022>();
await mazda3Factory.create();</code></pre>
						</figure>
					</section>

<!--					<section>-->
<!--						<div>-->
<!--							<h1>Runtime Generic Classes</h1>-->
<!--							<p>-->
<!--								Optionally, real generic classes generated from base classes at runtime.-->
<!--							</p>-->
<!--						</div>-->
<!--						<figure>-->
<!--						<pre><code class="language-typescript">const entityType = Reflect.getType&lt;Entity>();-->

<!--const allEntities: Type[] = Metadata.getModules()-->
<!--	.filter(module => module.path.includes(__dirname))-->
<!--	.flatMap(module => module.getTypes())-->
<!--	.filter(type => type.exported &amp;&amp; type.isClass() -->
<!--		&amp;&amp; !type.abstract && type.isDerivedFrom(entityType));</code></pre>-->
<!--						</figure>-->
<!--					</section>-->
					<!--				<div class="tile">-->
					<!--					<h1>Metadata library of types and modules</h1>-->
					<!--					<p>Static metadata library of all the types and modules from project accessible at runtime.</p>-->
					<!--				</div>-->

					<!--				<div class="tile">-->
					<!--					<h1>All types supported</h1>-->
					<!--					<p>-->
					<!--						Reflection over all the types such as classes, interfaces, type aliases and functions.-->
					<!--					</p>-->
					<!--				</div>-->

					<!--				<div class="tile">-->
					<!--					<h1>Generic type parameters</h1>-->
					<!--					<p>-->
					<!--						Reflection over generic type parameters of methods, functions and classes.-->
					<!--					</p>-->
					<!--				</div>-->

					<!--				<div class="tile">-->
					<!--					<h1>Runtime generic classes</h1>-->
					<!--					<p>-->
					<!--						Optionally, real generic classes generated from base classes at runtime.-->
					<!--					</p>-->
					<!--				</div>-->
				</section>
			</div>

			<!--			<div class="section-wrap">-->
			<!--				<section>-->
			<!--					<h1 id="playground">Playground</h1>-->

			<!--				</section>-->
			<!--			</div>-->
		</main>

		<footer>
			<span class="copy">&copy 2022 RTTIST.org</span>
		</footer>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js"></script>
		<script>
			document.addEventListener("DOMContentLoaded", () => {
				// Fix wrong keywords
				document.querySelectorAll("pre code .punctuation + .keyword").forEach(keywordElement => {
					if (keywordElement.previousElementSibling.innerText === ".") {
						keywordElement.classList.add("not-keyword");
					}
				});

				const TYPE_MATCH = /\s[a-zA-Z0-9_@<>]/;

				// Fix types
				document.querySelectorAll("pre code .operator").forEach(operator => {
					if (
						operator.innerText === ":"
						&& (
							operator.previousSibling.nodeType === Node.TEXT_NODE 
							|| (
								operator.previousElementSibling.classList.contains("punctuation")
								&& operator.previousElementSibling.innerText === ")"
							)
						)
						&& operator.nextSibling.nodeType === Node.TEXT_NODE
						&& TYPE_MATCH.test(operator.nextSibling.textContent)
					)
					{
						const wrap = document.createElement("div");
						wrap.innerHTML = '<span class="token maybe-class-name">' + operator.nextSibling.textContent + '</span>';
						operator.nextSibling.replaceWith(wrap.children[0]);
					}
				});
			});
		</script>
	</body>
</html>
